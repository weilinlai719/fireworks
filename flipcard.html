<!DOCTYPE html>
<html>
<head>
    <link rel="icon" href="flipcard.png"></link>
    <title>flip-card</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --primary-color: #2980b9;
            --bg-color: #f0f0f0;
            --card-front: #cec8c8;
            --transition-speed: 0.6s;
        }
        body {
            padding-top: 2.5%;  
            padding-bottom: 2.5%;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            margin: 0;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 200px));
            gap: 20px;    
        }
        .flip-card {
            background-color: transparent;
            width: 300px;
            height: 200px;
            perspective: 1000px; 

        }
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }
          .is-flipped.flip-card-inner {
             transform: rotateY(180deg);
    }
        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 10px;
        }
        .flip-card-front {
            background-color: #cec8c8;
            color: black;
        }
        .flip-card-back {
            background-color: #2980b9;
            color: white;
            transform: rotateY(180deg);
        }
        button{
           height: 100%;
            width: 100%;
        }
     .page-button {
    position: fixed;
    top: 50%;
    transform: translateY(-50%);
    width: 54px;             
    height: 54px;
    border: none;
    border-radius: 50%;
    background-color: rgba(154, 163, 165, 0.75);  
    color: white;
    font-size: 1.8rem;          
    font-weight: bold;
    cursor: pointer;
    display: flex;              
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.18);
    transition: all 0.22s ease;
    z-index: 100;
    user-select: none;
}


.page-button:active {
    transform: translateY(-50%) scale(0.94);
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.page-button:disabled,
.page-button[disabled] {
    opacity: 0.38;
    cursor: not-allowed;
    transform: translateY(-50%) scale(1);
    box-shadow: none;
}

#prevpage {
    left: 16px;
}

#nextpage {
    right: 16px;
}
        .pagenumber{
            position: fixed; 
            bottom: 10px; 
            left: 50%; 
            transform: translateX(-50%);
            background-color: #9aa3a5b2;
            border-radius: 15px;
            color: rgb(2, 2, 2);
            padding: 5px 15px;
            font-size: 16px;
        }
        .loading {
      grid-column: 1 / -1;
      text-align: center;
      padding: 60px 20px;
      color: #666;
      font-size: 1.1rem;
    }
        @media screen and (min-width: 768px) {
             .flip-card:hover .flip-card-inner {
            transform: rotateY(180deg);
        }
           .page-button:hover {
    background-color: #6c757d;  
    transform: translateY(-50%) scale(1.14);
    box-shadow: 0 8px 20px rgba(0,0,0,0.28);
} 
        }
        @media screen and (max-width: 768px) {
            body {
                display: flex;
                flex-direction: column;
                align-items: center;
                padding-bottom: 40px;
            }

            .flip-card {
                height: 80px; 
                max-width: 300px;
                margin-bottom: 5px;
            }


            .flip-card-front p, .flip-card-back p {
                display: none; 
            }
            .pagenumber {
            position: fixed; 
            background-color: #f0f0f0; 
            border-top: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
       .page-button {
        width: 52px;
        height: 52px;
        font-size: 1.7rem;
    }
        #nextpage {
        right: 7.5px;
        }

        #prevpage {
        left: 7.5px;
        }
        }
        
        </style>
</head>
        <body>
            <div class="loading" id="loading">載入單字中...</div>
           <button class="page-button" id="prevpage" ><</button>
            <button class="page-button" id="nextpage">></button>
            <div class="pagenumber" id="pagenumber" onclick="alert('Current Page: ' + (currentPage + 1))">Page 1</div>
           <script>
const loadingEl = document.getElementById('loading');
let currentPage = 0;
const cardsPerPage = 12;

fetch('englishcard.json')
    .then(response => response.json())
    .then(data => {
        loadingEl.remove();

        data.forEach((item) => {
            const cardHTML = `
                <div class="flip-card" onclick="handleCardToggle(this)">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <p>#${item.id}</p>
                            <h3>${item.chinese}</h3>
                        </div>
                        <div class="flip-card-back">
                            <p>#${item.id}</p>
                            <h3>${item.english}</h3>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', cardHTML);
        });

        initPagination();
    })
    .catch(error => {
        loadingEl.textContent = '載入失敗，請稍後再試';
        console.error('Error:', error);
    });

function initPagination() {
    const cards = document.querySelectorAll('.flip-card');
    const nextPageBtn = document.getElementById('nextpage');
    const prevPageBtn = document.getElementById('prevpage');
    const pagenumDisplay = document.getElementById('pagenumber');

    function showPage(page) {
        cards.forEach((card, index) => {
            const isVisible = index >= page * cardsPerPage && index < (page + 1) * cardsPerPage;
            card.style.display = isVisible ? 'block' : 'none';
            if (isVisible) {
                const inner = card.querySelector('.flip-card-inner');
                inner.classList.remove('is-flipped');
            }
        });

        const totalPages = Math.ceil(cards.length / cardsPerPage);
        pagenumDisplay.textContent = `Page ${page + 1} / ${totalPages}`;
    }

    document.addEventListener('keydown', event => {
        if (event.key === 'ArrowRight' || event.key === ' ') {
            if ((currentPage + 1) * cardsPerPage < cards.length) {
                currentPage++;
                showPage(currentPage);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        } else if (event.key === 'ArrowLeft') {
            if (currentPage > 0) {
                currentPage--;
                showPage(currentPage);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }
    });

    nextPageBtn.addEventListener('click', () => {
        if ((currentPage + 1) * cardsPerPage < cards.length) {
            currentPage++;
            showPage(currentPage);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    });

    prevPageBtn.addEventListener('click', () => {
        if (currentPage > 0) {
            currentPage--;
            showPage(currentPage);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    });


    showPage(currentPage);
}

function handleCardToggle(cardElement) {
    const inner = cardElement.querySelector('.flip-card-inner');
    inner.classList.toggle('is-flipped');
}
</script>
    </body>
</html>
